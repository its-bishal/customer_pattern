
---

# SQL Project: Customer Purchasing Patterns

## Project Overview

This project includes stored procedures to analyze customer purchasing patterns over time using MySQL. The main focus is on creating and analyzing customer patterns to understand buying behavior.

## Table of Contents

1. [Project Structure](#project-structure)
2. [Stored Procedures](#stored-procedures)
    - [sp_sw_pattern](#sp_sw_pattern)
    - [sp_purchasing_pattern](#sp_purchasing_pattern)
3. [Usage](#usage)
4. [License](#license)

## Project Structure

- **sp_sw_pattern:** A stored procedure to create a customer pattern between the passed start and end dates.
- **sp_purchasing_pattern:** A stored procedure to analyze customer purchasing behavior in the latest period of time.

## Stored Procedures

### sp_sw_pattern

This stored procedure creates customer patterns based on purchase data between the specified start and end dates.

1. **Customer Pattern Table Creation:**
   - Creates a table `customer_pattern` with monthly columns representing if the customer has bought a particular item in the week.

2. **Pattern Sequence Generation:**
   - Using the `customer_pattern` table, it creates a sequence of the pattern in the `sequence` column of a new table `sp_customer_pattern`.

### sp_purchasing_pattern

This stored procedure analyzes customer purchasing behavior based on the sequences generated by `sp_sw_pattern`.

1. **Temporary Table Creation:**
   - Creates a temporary table consisting of customer behavior in the latest period of time.

2. **Pattern Sequence Retrieval:**
   - The `sequence` column, retrieved from the `sp_customer_pattern` table, denotes the buying patterns of a customer in a certain period of time.

3. **Columns in Analysis:**
   - **Recency:** Denotes the last month in which the customer paid for the product.
   - **Continuity:** Denotes the number of months the customer continuously purchased the product.
   - **Max Length:** Returns the maximum length of the customer purchasing the product continuously.

4. **Function for Max Length:**
   - A function to return the `max_length` of each sequence is called in the `combined_pattern` procedure.

## Usage

1. **sp_sw_pattern:**
   - Execute the `sp_sw_pattern` procedure with the desired start and end dates to generate customer patterns.

   ```sql
   CALL sp_customer_pattern('2023-01-01', '2023-12-31');
   ```

2. **sp_purchasing_pattern:**
   - Execute the `sp_purchasing_pattern` procedure to analyze purchasing behavior based on the generated patterns.

   ```sql
   CALL purchasing_pattern();
   ```

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

---
